import{_ as I,g as v,o as n,c as i,b as t,n as C,w as _,F,r as S,d as g,t as h,h as U,p as w,f as L,e as d}from"./index-cf033306.js";import{C as T,P as M,B as V}from"./ButtonsList-bf263e9e.js";const p=r=>(w("data-v-de808aed"),r=r(),L(),r),P={class:"demo"},$={for:"upload",class:"drop-zone"},j=p(()=>t("div",{class:"drop-zone__label"},"File upload",-1)),R=["onDrop"],A={key:0,class:"files"},E=["onClick"],q=p(()=>t("strong",null,"Name: ",-1)),G=p(()=>t("strong",null,"Size: ",-1)),H=p(()=>t("strong",null,"Type: ",-1)),J={key:1},K=p(()=>t("span",null,"Browse file",-1)),O={key:0,class:"error-message"},Q={__name:"Upload",props:{collection:{type:Number,default:1},maxSize:{type:Number,default:5},image:{type:Boolean,default:!1},pdf:{type:Boolean,default:!1}},emits:["changeData"],setup(r,{emit:c}){const{collection:u,maxSize:m,image:x,pdf:f}=r,e=v([]),y=v(null),s=v(""),D=l=>Math.max(.01,(l/(1024*1024)).toFixed(2)),z=l=>{var o,b,B;s.value="";const a=((b=(o=l.target)==null?void 0:o.files)==null?void 0:b.length)>0?l.target.files[0]:(B=l==null?void 0:l.dataTransfer)==null?void 0:B.files[0];if(a!==void 0){if(x&&!["image/jpeg","image/png"].includes(a.type)){s.value="Incorrect image format.";return}if(f&&!["application/pdf"].includes(a.type)){s.value="Format must be .pdf";return}if(D(a.size)>m){s.value="Maximum size is 5MB.";return}if(e.value.findIndex(k=>k.name===a.name&&k.type===a.type)!==-1){s.value="This file has already been uploaded.";return}if(u===1)e.value=a;else{if(e.value.length>=u){s.value="Maximum number of files reached "+u+".";return}e.value.push(a)}c("changeData",e.value)}},N=l=>{const a=e.value.findIndex(o=>o.lastModified===l.lastModified);a!==-1&&(e.value.splice(a,1),c("changeData",e.value),s.value=""),y.value&&(y.value.value="")};return(l,a)=>(n(),i("div",P,[t("label",$,[j,t("div",{class:C(["drop-zone__field",{withFiles:e.value.length,error:s.value}]),onDrop:_(z,["prevent"]),onDragenter:a[0]||(a[0]=_(()=>{},["prevent"])),onDragover:a[1]||(a[1]=_(()=>{},["prevent"]))},[t("input",{ref_key:"fileInputRef",ref:y,type:"file",id:"upload",onChange:z},null,544),e.value.length?(n(),i("div",A,[(n(!0),i(F,null,S(e.value,o=>(n(),i("div",{class:"file",key:o.name,onClick:_(b=>N(o),["prevent","stop"])},[t("ul",null,[t("li",null,[q,g(h(o.name),1)]),t("li",null,[G,g(h(D(o.size)+"MB"),1)]),t("li",null,[H,g(h(o.type),1)])])],8,E))),128))])):(n(),i("p",J,[g("Drag and drop or "),K]))],42,R)]),s.value?(n(),i("p",O,h(s.value),1)):U("",!0)]))}},W=I(Q,[["__scopeId","data-v-de808aed"]]),X={class:"main__example example"},Y=t("h1",{class:"example__title"},"Upload Files",-1),ae={__name:"UploadView",setup(r){const c=[{name:"collection",text:"Number | Defaul = 1, number of files."},{name:"maxSize",text:"Number | Defaul = 5MB, maximum file size."},{name:"image",text:"Boolend | Defaul = false, files must be in jpeg or png format."},{name:"pdf",text:"Number | Defaul = false, file must be in pdf format."}],u=[{name:"changeData",text:"Arguments: file or files[]."}],m=v([]),x=f=>{m.value=f.map(e=>({name:e.name,size:e.size,type:e.type}))};return(f,e)=>(n(),i("section",X,[Y,d(W,{collection:6,onChangeData:x}),d(T,{items:m.value},null,8,["items"]),d(M,{list:c}),d(M,{list:u,emit:""}),d(V,{link:"https://github.com/skiff26/dragdrop/blob/main/src/components/examples/Upload.vue"})]))}};export{ae as default};
