import{_ as N,g as v,o as n,c as i,b as a,n as C,w as _,F,r as S,d as g,t as h,h as U,p as w,f as L,e as d}from"./index-2c1ca2ec.js";import{C as T,P as M,B as V}from"./ButtonsList-dd58c755.js";const p=r=>(w("data-v-a23c6bf5"),r=r(),L(),r),P={class:"demo"},$={for:"upload",class:"drop-zone"},j=p(()=>a("div",{class:"drop-zone__label"},"File upload",-1)),R=["onDrop"],A={key:0,class:"files"},E=["onClick"],q=p(()=>a("strong",null,"Name: ",-1)),G=p(()=>a("strong",null,"Size: ",-1)),H=p(()=>a("strong",null,"Type: ",-1)),J={key:1},K=p(()=>a("span",null,"Browse file",-1)),O={key:0,class:"error-message"},Q={__name:"Upload",props:{collection:{type:Number,default:1},maxSize:{type:Number,default:5},image:{type:Boolean,default:!1},pdf:{type:Boolean,default:!1}},emits:["changeData"],setup(r,{emit:c}){const{collection:u,maxSize:f,image:x,pdf:m}=r,e=v([]),y=v(null),s=v(""),D=l=>Math.max(.01,(l/(1024*1024)).toFixed(2)),z=l=>{var o,b,B;s.value="";const t=((b=(o=l.target)==null?void 0:o.files)==null?void 0:b.length)>0?l.target.files[0]:(B=l==null?void 0:l.dataTransfer)==null?void 0:B.files[0];if(t!==void 0){if(x&&!["image/jpeg","image/png"].includes(t.type)){s.value="Incorrect image format.";return}if(m&&!["application/pdf"].includes(t.type)){s.value="Format must be .pdf";return}if(D(t.size)>f){s.value="Maximum size is 5MB.";return}if(e.value.findIndex(k=>k.name===t.name&&k.type===t.type)!==-1){s.value="This file has already been uploaded.";return}if(u===1)e.value=t;else{if(e.value.length>=u){s.value="Maximum number of files reached "+u+".";return}e.value.push(t)}c("changeData",e.value)}},I=l=>{const t=e.value.findIndex(o=>o.lastModified===l.lastModified);t!==-1&&(e.value.splice(t,1),c("changeData",e.value),s.value=""),y.value&&(y.value.value="")};return(l,t)=>(n(),i("div",P,[a("label",$,[j,a("div",{class:C(["drop-zone__field",{withFiles:e.value.length,error:s.value}]),onDrop:_(z,["prevent"]),onDragenter:t[0]||(t[0]=_(()=>{},["prevent"])),onDragover:t[1]||(t[1]=_(()=>{},["prevent"]))},[a("input",{ref_key:"fileInputRef",ref:y,type:"file",id:"upload",onChange:z},null,544),e.value.length?(n(),i("div",A,[(n(!0),i(F,null,S(e.value,o=>(n(),i("div",{class:"file",key:o.name,onClick:_(b=>I(o),["prevent","stop"])},[a("ul",null,[a("li",null,[q,g(h(o.name),1)]),a("li",null,[G,g(h(D(o.size)+"MB"),1)]),a("li",null,[H,g(h(o.type),1)])])],8,E))),128))])):(n(),i("p",J,[g("Drag and drop or "),K]))],42,R)]),s.value?(n(),i("p",O,h(s.value),1)):U("",!0)]))}},W=N(Q,[["__scopeId","data-v-a23c6bf5"]]),X={class:"main__example example"},Y=a("h1",{class:"example__title"},"Upload Files",-1),te={__name:"UploadView",setup(r){const c=[{name:"collection",text:"Number | Default = 1, number of files."},{name:"maxSize",text:"Number | Default = 5MB, maximum file size."},{name:"image",text:"Boolend | Default = false, files must be in jpeg or png format."},{name:"pdf",text:"Boolend | Default = false, file must be in pdf format."}],u=[{name:"changeData",text:"Arguments: file or files[]."}],f=v([]),x=m=>{f.value=m.map(e=>({name:e.name,size:e.size,type:e.type}))};return(m,e)=>(n(),i("section",X,[Y,d(W,{collection:6,onChangeData:x}),d(T,{items:f.value},null,8,["items"]),d(M,{list:c}),d(M,{list:u,emit:""}),d(V,{link:"https://github.com/skiff26/dragdrop/blob/main/src/components/examples/Upload.vue"})]))}};export{te as default};
