import{_ as I,g as v,o as n,c as i,b as t,n as N,w as _,F as w,r as F,d as g,t as h,i as S,p as U,f as V,e as d,h as T}from"./index-790e05ed.js";import{C as P,B as $,P as C,V as L}from"./ViewCodeButton-5fbaf652.js";const u=r=>(U("data-v-f39129ad"),r=r(),V(),r),j={class:"demo"},R={for:"upload",class:"drop-zone"},A=u(()=>t("div",{class:"drop-zone__label"},"File upload",-1)),E=["onDrop"],q={key:0,class:"files"},G=["onClick"],H=u(()=>t("strong",null,"Name: ",-1)),J=u(()=>t("strong",null,"Size: ",-1)),K=u(()=>t("strong",null,"Type: ",-1)),O={key:1},Q=u(()=>t("span",null,"Browse file",-1)),W={key:0,class:"error-message"},X={__name:"Upload",props:{collection:{type:Number,default:1},maxSize:{type:Number,default:5},image:{type:Boolean,default:!1},pdf:{type:Boolean,default:!1}},emits:["changeData"],setup(r,{emit:p}){const{collection:c,maxSize:f,image:x,pdf:m}=r,e=v([]),y=v(null),s=v(""),D=o=>Math.max(.01,(o/(1024*1024)).toFixed(2)),z=o=>{var l,b,B;s.value="";const a=((b=(l=o.target)==null?void 0:l.files)==null?void 0:b.length)>0?o.target.files[0]:(B=o==null?void 0:o.dataTransfer)==null?void 0:B.files[0];if(a!==void 0){if(x&&!["image/jpeg","image/png"].includes(a.type)){s.value="Incorrect image format.";return}if(m&&!["application/pdf"].includes(a.type)){s.value="Format must be .pdf";return}if(D(a.size)>f){s.value="Maximum size is 5MB.";return}if(e.value.findIndex(k=>k.name===a.name&&k.type===a.type)!==-1){s.value="This file has already been uploaded.";return}if(e.value.length>=c){s.value="Maximum number of files reached "+c+".";return}e.value.push(a),p("changeData",e.value)}},M=o=>{const a=e.value.findIndex(l=>l.lastModified===o.lastModified);a!==-1&&(e.value.splice(a,1),p("changeData",e.value),s.value=""),y.value&&(y.value.value="")};return(o,a)=>(n(),i("div",j,[t("label",R,[A,t("div",{class:N(["drop-zone__field",{withFiles:e.value.length,error:s.value}]),onDrop:_(z,["prevent"]),onDragenter:a[0]||(a[0]=_(()=>{},["prevent"])),onDragover:a[1]||(a[1]=_(()=>{},["prevent"]))},[t("input",{ref_key:"fileInputRef",ref:y,type:"file",id:"upload",onChange:z},null,544),e.value.length?(n(),i("div",q,[(n(!0),i(w,null,F(e.value,l=>(n(),i("div",{class:"file",key:l.name,onClick:_(b=>M(l),["prevent","stop"])},[t("ul",null,[t("li",null,[H,g(h(l.name),1)]),t("li",null,[J,g(h(D(l.size)+"MB"),1)]),t("li",null,[K,g(h(l.type),1)])])],8,G))),128))])):(n(),i("p",O,[g("Drag and drop or "),Q]))],42,E)]),s.value?(n(),i("p",W,h(s.value),1)):S("",!0)]))}},Y=I(X,[["__scopeId","data-v-f39129ad"]]),Z={class:"main__example example"},ee=t("h1",{class:"example__title"},"Upload Files",-1),se={__name:"UploadView",setup(r){const p=[{name:"collection",text:"Number | Default = 1, number of files."},{name:"maxSize",text:"Number | Default = 5MB, maximum file size."},{name:"image",text:"Boolend | Default = false, files must be in jpeg or png format."},{name:"pdf",text:"Boolend | Default = false, file must be in pdf format."}],c=[{name:"changeData",text:"Arguments: file or files[]."}],f=v([]),x=m=>{f.value=m.map(e=>({name:e.name,size:e.size,type:e.type}))};return(m,e)=>(n(),i("section",Z,[ee,d(Y,{collection:6,onChangeData:x}),d(P,{data:f.value},null,8,["data"]),d(C,{list:p}),d(C,{list:c,emit:""}),d($,null,{default:T(()=>[d(L,{url:"https://github.com/skiff26/dragdrop/blob/main/src/components/examples/Upload.vue"})]),_:1})]))}};export{se as default};
