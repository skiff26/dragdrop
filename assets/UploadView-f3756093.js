import{_ as N,g as v,o as n,c as i,b as a,n as C,w as _,F,r as S,d as g,t as h,h as U,p as w,f as L,e as u}from"./index-0e3632fb.js";import{C as T,P as M,B as V}from"./ButtonsList-4ebe67e7.js";const d=r=>(w("data-v-6ff2eb72"),r=r(),L(),r),P={class:"demo"},$={for:"upload",class:"drop-zone"},j=d(()=>a("div",{class:"drop-zone__label"},"File upload",-1)),R=["onDrop"],A={key:0,class:"files"},E=["onClick"],q=d(()=>a("strong",null,"Name: ",-1)),G=d(()=>a("strong",null,"Size: ",-1)),H=d(()=>a("strong",null,"Type: ",-1)),J={key:1},K=d(()=>a("span",null,"Browse file",-1)),O={key:0,class:"error-message"},Q={__name:"Upload",props:{collection:{type:Number,default:1},maxSize:{type:Number,default:5},image:{type:Boolean,default:!1},pdf:{type:Boolean,default:!1}},emits:["changeData"],setup(r,{emit:p}){const{collection:c,maxSize:f,image:x,pdf:m}=r,e=v([]),y=v(null),s=v(""),D=o=>Math.max(.01,(o/(1024*1024)).toFixed(2)),z=o=>{var l,b,B;s.value="";const t=((b=(l=o.target)==null?void 0:l.files)==null?void 0:b.length)>0?o.target.files[0]:(B=o==null?void 0:o.dataTransfer)==null?void 0:B.files[0];if(t!==void 0){if(x&&!["image/jpeg","image/png"].includes(t.type)){s.value="Incorrect image format.";return}if(m&&!["application/pdf"].includes(t.type)){s.value="Format must be .pdf";return}if(D(t.size)>f){s.value="Maximum size is 5MB.";return}if(e.value.findIndex(k=>k.name===t.name&&k.type===t.type)!==-1){s.value="This file has already been uploaded.";return}if(e.value.length>=c){s.value="Maximum number of files reached "+c+".";return}e.value.push(t),p("changeData",e.value)}},I=o=>{const t=e.value.findIndex(l=>l.lastModified===o.lastModified);t!==-1&&(e.value.splice(t,1),p("changeData",e.value),s.value=""),y.value&&(y.value.value="")};return(o,t)=>(n(),i("div",P,[a("label",$,[j,a("div",{class:C(["drop-zone__field",{withFiles:e.value.length,error:s.value}]),onDrop:_(z,["prevent"]),onDragenter:t[0]||(t[0]=_(()=>{},["prevent"])),onDragover:t[1]||(t[1]=_(()=>{},["prevent"]))},[a("input",{ref_key:"fileInputRef",ref:y,type:"file",id:"upload",onChange:z},null,544),e.value.length?(n(),i("div",A,[(n(!0),i(F,null,S(e.value,l=>(n(),i("div",{class:"file",key:l.name,onClick:_(b=>I(l),["prevent","stop"])},[a("ul",null,[a("li",null,[q,g(h(l.name),1)]),a("li",null,[G,g(h(D(l.size)+"MB"),1)]),a("li",null,[H,g(h(l.type),1)])])],8,E))),128))])):(n(),i("p",J,[g("Drag and drop or "),K]))],42,R)]),s.value?(n(),i("p",O,h(s.value),1)):U("",!0)]))}},W=N(Q,[["__scopeId","data-v-6ff2eb72"]]),X={class:"main__example example"},Y=a("h1",{class:"example__title"},"Upload Files",-1),te={__name:"UploadView",setup(r){const p=[{name:"collection",text:"Number | Default = 1, number of files."},{name:"maxSize",text:"Number | Default = 5MB, maximum file size."},{name:"image",text:"Boolend | Default = false, files must be in jpeg or png format."},{name:"pdf",text:"Boolend | Default = false, file must be in pdf format."}],c=[{name:"changeData",text:"Arguments: file or files[]."}],f=v([]),x=m=>{f.value=m.map(e=>({name:e.name,size:e.size,type:e.type}))};return(m,e)=>(n(),i("section",X,[Y,u(W,{collection:6,onChangeData:x}),u(T,{items:f.value},null,8,["items"]),u(M,{list:p}),u(M,{list:c,emit:""}),u(V,{link:"https://github.com/skiff26/dragdrop/blob/main/src/components/examples/Upload.vue"})]))}};export{te as default};
